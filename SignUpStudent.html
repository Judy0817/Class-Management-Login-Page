<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="Form.css">
    <title>Registration Form</title>
    </head>
<body>
    <section class="Form my-4 mx-5">
        <div class="container">
         <div class="row no-gutters">
            
     <div class="col-lg-7 px-3 pt-3">
         <h1 class="font-weight-bold ">Registration</h1>
         
             <div class="form-row">
                <div class="col-lg-12">
                     <input type="text" id="enterFirstName" name="enterFirstName" placeholder="First Name" class="form-control my-3 p-4">
                 </div>
             </div>
 
             <div class="form-row">
                <div class="col-lg-12">
                     <input type="text" id="enterSecondName" name="enterSecondName" placeholder="Last Name"  class="form-control my-3 p-4">
                 </div>
             </div>

             <div class="form-row">
                <div class="col-lg-12">
                    <input type="text" id="enterFirstGName" name="enterFirstGName" placeholder="Gaurdian's First Name"  class="form-control my-3 p-4">
                </div>
            </div>

            <div class="form-row">
                <div class="col-lg-12">
                    <input type="text" id="enterSecondGName" name="enterSecondGName" placeholder="Gaurdian's Second Name"  class="form-control my-3 p-4">
                </div>
            </div>

            <div class="form-row">
                <div class="col-lg-12">
                    <input type="number" id="enterAge" name="enterAge" placeholder="Age"  class="form-control my-3 p-4">
                </div>
            </div>

            <div class="form-row">
                <div class="col-lg-12">
                    <input type="number" id="enterGrade" name="enterGrade" placeholder="Grade"  class="form-control my-3 p-4">
                </div>
            </div>

            <div class="form-row">
                <div class="col-lg-12">
                    <input type="text" id="enterNumber" name="enterNumber" placeholder="Number"  class="form-control my-3 p-4">
                </div>
            </div>


            <div class="form-row">
                <div class="col-lg-12">
                    <p class="word">Date of Birth<br><input type="date" id="enterBirth" name="trip-start" min="2018-01-01" max="2023-01-01" placeholder="Date Of Birth" class="form-control">
                </div>
            </div>


            <div class="form-row">
                <div class="col-lg-12">
                    <p class="word">Gender<br>
                    <input type="radio" name="gender" value="male" id="enterGender" >     Male 
                    <input type="radio" name="gender" value="female" id="enterGender">     Female 
                </div>
            </div>
         
             <div class="form-row">
                 <div class="col-lg-12">
                    <input type="submit" id="insert" class="btn1 mt-3 mb-4" value="Register">
                 </div>
             </div>

           
             
        
         </div>
         </div>
         </div>
         </section>
</script>
    


      <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

</body>

        <script type="module">

//------------------------------------getData-----------------------------------//

  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
  import { getDatabase,set,get,update,remove,ref,child } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js";
  import { getAuth,signInWithEmailAndPassword, createUserWithEmailAndPassword,onAuthStateChanged  } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-auth.js";
    


  const firebaseConfig = {
    apiKey: "AIzaSyAI0yekzN6HXw6KPR0whMpsd0AUQRRwuI4",
    authDomain: "myclasssystem-a9051.firebaseapp.com",
    databaseURL: "https://myclasssystem-a9051-default-rtdb.firebaseio.com",
    projectId: "myclasssystem-a9051",
    storageBucket: "myclasssystem-a9051.appspot.com",
    messagingSenderId: "920203645327",
    appId: "1:920203645327:web:d418c4f929d4bcb9573bfa"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth();
  const db =getDatabase();
  
        
        
        
                    var enterFirstName=document.querySelector("#enterFirstName");
                    var enterSecondName=document.querySelector("#enterSecondName");
                    var enterFirstGName=document.querySelector("#enterFirstGName");
                    var enterSecondGName=document.querySelector("#enterSecondGName");
                    var enterAge=document.querySelector("#enterAge");   
                    var enterGrade=document.querySelector("#enterGrade");
                    var enterNumber=document.querySelector("#enterNumber");
                    var enterBirth=document.querySelector("#enterBirth");
                    var enterGender=document.querySelector("#enterGender");
                    
                    
                    
                    var insertBtn=document.querySelector("#insert");
                    var selecBtn=document.querySelector("#select");
                    var removeBtn=document.querySelector("#remove");
                   
                    const user=auth.currentUser;
    onAuthStateChanged(auth, (user) => {
    if (user) {
         const uid=user.uid;
         alert(uid);
         //InsertData(uid);
         insertBtn.addEventListener('click',InsertData);

    } else {
        //alert("Not signIn!")
    }
    });

                    function InsertData(uid)
                    {
                        const user=auth.currentUser;
                        set(ref(db,"Student/"+ uid),{
                            FirstName:enterFirstName.value,
                            SecondName:enterSecondName.value,
                            FirstGName:enterFirstGName.value,
                            SecondGName:enterSecondGName.value,
                            Age:enterAge.value,
                            Grade:enterGrade.value,
                            Number:enterNumber.value,
                            Birthday:enterBirth.value,
                            Gender:enterGender.value,
                           
                        })
                        .then(()=>{
                            alert("Data added Successfully!")
                        })
                        .catch((error)=>{
                            alert(error)
                        });
                      
                    }

                    

                    // function selectData()
                    // {
                    //     const dbref=ref(db);
                    //     get(child(dbref,"Student/" + enterFirstName.value)).then((snapshot)=>{
                    //         if(snapshot.exists()){
                    //             enterSecondName.value=snapshot.val().SecondName;
                    //             enterFirstGName.value=snapshot.val().FirstGName;
                    //             enterSecondGName.value=snapshot.val().SecondGName;
                    //             enterAge.value=snapshot.val().Age;
                    //             enterGrade.value=snapshot.val().Grade;
                    //             enterNumber.value=snapshot.val().Number;
                    //             enterBirth.value=snapshot.val().Birthday;
                    //             enterGender.value=snapshot.val().Gender;
                    //         }
                    //         else{
                    //             alert("No data found");
                    //         }
                    //     })
                    //     .catch((error)=>{
                    //         alert(error);
                    //     })
                        
                    // }
                    // selecBtn.addEventListener('click',selectData);

                    // function RemoveData()
                    // {
                    //     remove(ref(db,"Student/"+enterFirstName.value),{
                    //         FirstName: enterFirstName,
                    //         SecondName: enterSecondName,
                    //         FirstGName: enterFirstGName,
                    //         SecondGName: enterSecondGName,
                    //         Age: enterAge,
                    //         Grade: enterGrade,
                    //         Number: enterNumber,
                    //         Birthday: enterBirth,
                    //         Gender: enterGender
                    //     })
                    //     .then(()=>{
                    //         alert("Your data removed. Fill again. ")
                    //     })
                    //     .catch((error)=>{
                    //         alert(error)
                    //     });

                    // }
                    // removeBtn.addEventListener('click',RemoveData);
    //---------------------------------GetImage----------------------------------------------//

import{getStorage,ref as sRef,uploadBytesResumable,getDownloadURL} 
from "https://www.gstatic.com/firebasejs/9.17.2/firebase-storage.js";
                    
function upload()
{
        var image=document.getElementById("image").files[0];
        var imageName=image.name;
        var storageRef=firebase.storage().ref('images/'+imageName);
        var uploadTask=storageRef.put(image);

        uploadTask.on('state_changed',function(snapshot){
            var progress=(snapshot.bytesTransferred/snapshot.totalBytes)*100;
            console.log("upload is "+progress +"done");
        },function(error){
            console.log(error.message);
            
        },function(){
            uploadTask.snapshot.ref.getDownLoadURL().then(function(downloadURL){
                console.log(downloadURL);
            });
        
        });
}



          
      </script>
      
</body>
</html>